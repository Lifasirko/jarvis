{% extends "base.html" %}

{% block title %}
    Manage Tags
{% endblock %}

{% block content %}
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
        }

        h1 {
            color: #00aaff;
        }

        form {
            margin: 20px 0;
        }

        button, input[type="submit"] {
            background-color: #00aaff;
            border: 2px solid #0077cc;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: white;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            text-align: center;
        }

        button:hover, input[type="submit"]:hover {
            background-color: #0077cc;
            border-color: #005fa3;
        }

        .btn-back {
            background-color: #00aaff;
            border: 2px solid #0077cc;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: white;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            text-align: center;
        }

        .btn-back:hover {
            background-color: #0077cc;
            border-color: #005fa3;
        }

        .btn-danger {
            background-color: #ff4d4d;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            text-decoration: none;
            font-size: 16px;
        }

        .btn-danger:hover {
            background-color: #cc0000;
        }

        .btn-secondary {
            background-color: #0077cc;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            text-decoration: none;
            font-size: 16px;
        }

        .btn-secondary:hover {
            background-color: #005fa3;
        }

    </style>

    <h1>Manage Tags</h1>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save</button>
    </form>
    <a href="{% url 'task_manager:task_list' %}" class="btn-back">Back to Tasks</a>

    <h2>Existing Tags</h2>
    <ul>
        {% for tag in tags %}
            <li>{{ tag.name }}
                <a href="{% url 'task_manager:tag_edit' tag.id %}" class="btn-secondary">Edit</a>
                <a href="#" class="btn-danger" onclick="confirmDelete({{ tag.id }}); return false;">Delete</a>
            </li>
        {% empty %}
            <li>No tags available.</li>
        {% endfor %}
    </ul>

    <form id="delete-form" method="post" style="display: none;">
        {% csrf_token %}
    </form>

    <script>
        function confirmDelete(tagId) {
            if (confirm('Are you sure you want to delete this tag?')) {
                const form = document.getElementById('delete-form');
                form.action = `/tasks/tags/delete/${tagId}/`;
                form.submit();
            }
        }
    </script>
{% endblock %}
